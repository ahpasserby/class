<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025å±ŠåŒå­¦å»å‘åœ°å›¾</title>
  <!-- å¼•å…¥Leafletå’Œé«˜å¾·æ’ä»¶ -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://webapi.amap.com/maps?v=2.0&key=eabfc3094e04f1f9b7a686034fdfcc36"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    #map { width:100%; height:100vh; background:#f7f9fc; }
    
    /* å¼¹çª—æ ·å¼ */
    .custom-popup { 
      min-width:250px; 
      font-family: "Microsoft YaHei", sans-serif; 
      padding:12px;
      border-radius:6px;
      box-shadow:0 3px 10px rgba(0,0,0,0.2);
    }
    .custom-popup b { 
      color:#2c3e50; 
      font-size:16px;
      display:block;
      margin-bottom:5px;
    }
    .custom-popup .university { 
      color:#e74c3c; 
      font-weight:bold; 
      margin:6px 0;
    }
    .custom-popup .province { 
      color:#7f8c8d;
      margin:3px 0;
    }
    .custom-popup .notes { 
      background:#f8f9fa; 
      padding:8px; 
      border-radius:4px; 
      margin-top:10px;
      color:#3498db;
      font-size:14px;
      border-left:3px solid #3498db;
    }
    .custom-popup .phone {
      margin-top:8px;
      font-size:15px;
    }
    
    /* ä¸“ä¸šè‰²æ ‡ */
    .engineering { border-left:4px solid #ff9f43; }
    .medical { border-left:4px solid #ee5253; }
    .arts { border-left:4px solid #0abde3; }
    
    /* ç­›é€‰æ§ä»¶ */
    .major-filter {
      background:white;
      padding:10px 15px;
      border-radius:6px;
      box-shadow:0 0 15px rgba(0,0,0,0.2);
      margin-top:10px !important;
    }
    #major-select { 
      padding:8px 12px;
      border:1px solid #ddd;
      border-radius:4px;
      font-size:15px;
    }
    
    /* å›¾æ ‡æ ·å¼ */
    .custom-icon {
      width: 36px;
      height: 36px;
      background-size: 24px;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 50%;
      background-color: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      border:2px solid white;
    }
    .engineering-icon { 
      background-color: #ff9f43;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M5,12V15H3V12H5M3,7V10H5V7H3M7,5H10V3H7V5M15,3V5H18V3H15M10,21H7V19H10V21M15,21V19H18V21H15M19,7V10H21V7H19M19,12V15H21V12H19M16,11H13V8H16V11M11,11H8V8H11V11M16,16H13V13H16V16M11,16H8V13H11V16M4,4A1,1 0 0,1 5,5V6A1,1 0 0,1 4,7H3A1,1 0 0,1 2,6V5A1,1 0 0,1 3,4H4M20,4A1,1 0 0,1 21,5V6A1,1 0 0,1 20,7H19A1,1 0 0,1 18,6V5A1,1 0 0,1 19,4H20M4,18A1,1 0 0,1 5,19V20A1,1 0 0,1 4,21H3A1,1 0 0,1 2,20V19A1,1 0 0,1 3,18H4M20,18A1,1 0 0,1 21,19V20A1,1 0 0,1 20,21H19A1,1 0 0,1 18,20V19A1,1 0 0,1 19,18H20Z'/%3E%3C/svg%3E");
    }
    .medical-icon { 
      background-color: #ee5253;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M12,6L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8L12,6M14,16H10V14H7V10H10V8H14V10H17V14H14V16Z'/%3E%3C/svg%3E");
    }
    .arts-icon { 
      background-color: #0abde3;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M5,3C3.89,3 3,3.89 3,5V19C3,20.11 3.89,21 5,21H19C20.11,21 21,20.11 21,19V5C21,3.89 20.11,3 19,3H5M5,5H19V19H5V5M7,7V9H9V7H7M11,7V9H13V7H11M15,7V9H17V7H15M7,11V13H9V11H7M11,11V13H13V11H11M15,11V13H17V11H15M7,15V17H9V15H7M11,15V17H13V15H11M15,15V17H17V15H15Z'/%3E%3C/svg%3E");
    }
    
    /* æ ‡é¢˜æ ·å¼ */
    .header {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background: rgba(255,255,255,0.95);
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
      font-family: "Microsoft YaHei", sans-serif;
      max-width: 350px;
    }
    .header h1 {
      font-size: 22px;
      color: #2c3e50;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    .header .class-info {
      font-size: 16px;
      color: #7f8c8d;
      margin-bottom: 8px;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
    }
    .header .teacher {
      display: flex;
      align-items: center;
      margin-top: 8px;
      font-size: 15px;
    }
    .header .teacher-icon {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      background-color: #3498db;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
    }
    .header .teacher-name {
      font-weight: bold;
      color: #2c3e50;
    }
    .header .instruction {
      font-size: 14px;
      color: #7f8c8d;
      margin-top: 10px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>2025å±ŠåŒå­¦å¤§å­¦å»å‘åœ°å›¾</h1>
    <div class="class-info">é«˜ä¸‰(18)ç­ æ¯•ä¸šçºªå¿µ</div>
    <div class="teacher">
      <div class="teacher-icon">ç­</div>
      <div>ç­ä¸»ä»»: <span class="teacher-name">åˆ˜ç¾éœ</span></div>
    </div>
    <div class="instruction">ç‚¹å‡»åœ°å›¾æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ | å³ä¸Šè§’ç­›é€‰ä¸“ä¸šç±»å‹</div>
  </div>
  <div id="map"></div>
  
  <script>
    // å®Œæ•´åŒå­¦æ•°æ®ï¼ˆ50ä½åŒå­¦ï¼‰
    const classmatesData = [
      {name: "æå®‰", university: "è¥¿å—çŸ³æ²¹å¤§å­¦", province: "å››å·æˆéƒ½", major: "ç”µæ°”å·¥ç¨‹åŠå…¶è‡ªåŠ¨åŒ–", phone: "15779672681", notes: "", longitude: "104.185025", latitude: "30.826655"},
      {name: "æåšæ´‹", university: "æ­¦æ±‰ç†å·¥å¤§å­¦", province: "æ¹–åŒ—æ­¦æ±‰", major: "æœºæ¢°ç±»(æ™ºèƒ½åˆ¶é€ )", phone: "18827809140", notes: "", longitude: "114.343923", latitude: "30.513791"},
      {name: "æå¹¿æ–‡", university: "é»‘é¾™æ±Ÿå·¥ç¨‹å­¦é™¢", province: "é»‘é¾™æ±Ÿå“ˆå°”æ»¨", major: "å·¥ç¨‹ç®¡ç†", phone: "", notes: "", longitude: "126.534731", latitude: "45.803775"},
      {name: "æè¯—é¢–", university: "å—æ˜Œèˆªç©ºå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "é€šä¿¡å·¥ç¨‹", phone: "18720460108", notes: "ä¸åˆ˜ä½³æ…§ã€å²å®¸ç®ã€ç‹ç«ã€ç‹ç† å‡¡åŒæ ¡", longitude: "115.892151", latitude: "28.676493"},
      {name: "åˆ˜ä½³æ…§", university: "å—æ˜Œèˆªç©ºå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "æµ‹æ§æŠ€æœ¯ä¸ä»ªå™¨", phone: "15107965216", notes: "ä¸æè¯—é¢–ã€å²å®¸ç®ã€ç‹ç«ã€ç‹ç† å‡¡åŒæ ¡", longitude: "115.892151", latitude: "28.676493"},
      {name: "åˆ˜ä¿Šæ˜", university: "ä¸Šæµ·åº”ç”¨æŠ€æœ¯å¤§å­¦", province: "ä¸Šæµ·", major: "æ™ºèƒ½åˆ¶é€ å·¥ç¨‹", phone: "17879610276", notes: "", longitude: "121.473701", latitude: "31.230416"},
      {name: "åˆ˜å¦™çµ", university: "å¤§ç†å¤§å­¦", province: "äº‘å—å¤§ç†", major: "è§†è§‰ä¼ è¾¾è®¾è®¡", phone: "19577863892", notes: "", longitude: "100.225668", latitude: "25.596899"},
      {name: "åˆ˜æ€äº®", university: "åä¸œäº¤é€šå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "æœºæ¢°ç”µå­å·¥ç¨‹", phone: "", notes: "ä¸åˆ˜ä¼Ÿå¹³åŒæ ¡", longitude: "115.882447", latitude: "28.717399"},
      {name: "åˆ˜ä¼Ÿå¹³", university: "åä¸œäº¤é€šå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "æ™ºèƒ½åˆ¶é€ ", phone: "18770969927", notes: "ä¸åˆ˜æ€äº®åŒæ ¡", longitude: "115.882447", latitude: "28.717399"},
      {name: "åˆ˜ä¼Ÿå¼º", university: "è¥¿å—çŸ³æ²¹å¤§å­¦", province: "å››å·æˆéƒ½", major: "è‡ªåŠ¨åŒ–", phone: "13517068095", notes: "", longitude: "104.185025", latitude: "30.826655"},
      {name: "åˆ˜ç­±éœ", university: "å®‰å¾½ç†å·¥å¤§å­¦", province: "å®‰å¾½æ·®å—", major: "æ™ºèƒ½ç§‘å­¦ä¸æŠ€æœ¯", phone: "19578463786", notes: "", longitude: "117.018639", latitude: "32.642812"},
      {name: "åˆ˜å­æ‚¦", university: "æ±Ÿè¥¿ä¸­åŒ»è¯å¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "ä¸­åŒ»ç±»", phone: "15279637398", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "å­Ÿç£Š", university: "æµ™æ±Ÿç†å·¥å¤§å­¦", province: "æµ™æ±Ÿæ­å·", major: "ç”Ÿç‰©ç§‘å­¦ç±»ï¼ˆç”Ÿç‰©æŠ€æœ¯ï¼Œç”Ÿç‰©åˆ¶è¯ï¼‰", phone: "18879645386", notes: "ä¸å¶ç¥‰æ’åŒæ ¡", longitude: "120.173599", latitude: "30.308978"},
      {name: "æ¬§é˜³æ˜±", university: "èµ£å—å¸ˆèŒƒå¤§å­¦", province: "æ±Ÿè¥¿èµ£å·", major: "ç”µå­ç§‘å­¦ä¸æŠ€æœ¯", phone: "18007066199", notes: "ä¸ç‹å»ºçåŒæ ¡", longitude: "114.935909", latitude: "25.845296"},
      {name: "å½­å˜‰é”¡", university: "äº•å†ˆå±±å¤§å­¦", province: "æ±Ÿè¥¿å‰å®‰", major: "ç¯å¢ƒå·¥ç¨‹", phone: "19307968313", notes: "ä¸å‘¨å®¶ç‘œåŒæ ¡", longitude: "114.992043", latitude: "27.113847"},
      {name: "å½­å­å¼º", university: "è¥¿å—äº¤é€šå¤§å­¦", province: "å››å·æˆéƒ½", major: "åœŸæœ¨å·¥ç¨‹", phone: "18179658986", notes: "", longitude: "103.952249", latitude: "30.761877"},
      {name: "æ²™å“²æ¶µ", university: "ä¸œåç†å·¥å¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "æ ¸å·¥ç¨‹ä¸æ ¸æŠ€æœ¯", phone: "15279658081", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "å²å®¸ç®", university: "å—æ˜Œèˆªç©ºå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "è½¯ä»¶å·¥ç¨‹", phone: "18979655280", notes: "ä¸æè¯—é¢–ã€åˆ˜ä½³æ…§ã€ç‹ç«ã€ç‹ç† å‡¡åŒæ ¡", longitude: "115.892151", latitude: "28.676493"},
      {name: "è°­éœ‡", university: "é½é²å·¥ä¸šå¤§å­¦", province: "å±±ä¸œæµå—", major: "åŒ–å·¥ä¸åˆ¶è¯ç±»", phone: "19169742797", notes: "", longitude: "117.126399", latitude: "36.652833"},
      {name: "ç‹å»ºç", university: "èµ£å—å¸ˆèŒƒå¤§å­¦", province: "æ±Ÿè¥¿èµ£å·", major: "å¸ˆèŒƒç±»", phone: "19577865095", notes: "å…¬è´¹å¸ˆèŒƒç”Ÿï¼›ä¸æ¬§é˜³æ˜±åŒæ ¡", longitude: "114.935909", latitude: "25.845296"},
      {name: "ç‹å¯æ¬£", university: "å‰æ—å¤§å­¦", province: "å‰æ—é•¿æ˜¥", major: "äººåŠ›èµ„æºç®¡ç†", phone: "18770693803", notes: "", longitude: "125.313642", latitude: "43.898338"},
      {name: "ç‹ç‘é‘«", university: "æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦", province: "å¹¿è¥¿æ¡‚æ—", major: "ç‰©è”ç½‘å·¥ç¨‹", phone: "19044646689", notes: "", longitude: "110.301003", latitude: "25.104078"},
      {name: "ç‹ç«", university: "å—æ˜Œèˆªç©ºå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "å¢æåˆ¶é€ å·¥ç¨‹", phone: "18770645696", notes: "ä¸æè¯—é¢–ã€åˆ˜ä½³æ…§ã€å²å®¸ç®ã€ç‹ç† å‡¡åŒæ ¡", longitude: "115.892151", latitude: "28.676493"},
      {name: "ç‹å®", university: "å¤©æ´¥ä¸­åŒ»è¯å¤§å­¦", province: "å¤©æ´¥", major: "é¢„é˜²åŒ»å­¦", phone: "157796564", notes: "", longitude: "117.202813", latitude: "39.124809"},
      {name: "ç‹å¿ƒè•¾", university: "ä¸­å›½ä¼ åª’å¤§å­¦", province: "åŒ—äº¬", major: "ä¼ æ’­å­¦", phone: "13207061229", notes: "", longitude: "116.562374", latitude: "39.918083"},
      {name: "ç‹ä¸€çµ", university: "é›†ç¾å¤§å­¦", province: "ç¦å»ºå¦é—¨", major: "å·¥ç¨‹ç®¡ç†", phone: "13697066985", notes: "", longitude: "118.103886", latitude: "24.575052"},
      {name: "ç‹ç† å‡¡", university: "å—æ˜Œèˆªç©ºå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "å¢æåˆ¶é€ å·¥ç¨‹", phone: "19507966803", notes: "ä¸æè¯—é¢–ã€åˆ˜ä½³æ…§ã€å²å®¸ç®ã€ç‹ç«åŒæ ¡", longitude: "115.892151", latitude: "28.676493"},
      {name: "ç‹è‡»", university: "å²­å—å¸ˆèŒƒå­¦é™¢", province: "å¹¿ä¸œæ¹›æ±Ÿ", major: "è½¯ä»¶å·¥ç¨‹", phone: "18479636462", notes: "", longitude: "110.364977", latitude: "21.274898"},
      {name: "ç‹ç´«èŒœ", university: "æ±Ÿè¥¿ç§‘æŠ€å¸ˆèŒƒå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯", phone: "18307968921", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "è°¢ä¹æ³½", university: "è‹å·ç§‘æŠ€å¤§å­¦", province: "æ±Ÿè‹è‹å·", major: "å·¥ç¨‹ç®¡ç†", phone: "15779676695", notes: "", longitude: "120.585315", latitude: "31.298886"},
      {name: "è°¢æ€è¿œ", university: "å—æ˜Œå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "åˆ¶è¯å·¥ç¨‹", phone: "19870671609", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "ç†Šè¶Š", university: "éƒ‘å·å¤§å­¦", province: "æ²³å—éƒ‘å·", major: "ç»æµå­¦ç±»", phone: "18797961609", notes: "", longitude: "113.541082", latitude: "34.82207"},
      {name: "è‚–å­å°š", university: "è¾½å®ç§‘æŠ€å¤§å­¦", province: "è¾½å®éå±±", major: "å›½é™…ç»æµä¸è´¸æ˜“", phone: "19870623406", notes: "", longitude: "122.935637", latitude: "41.097102"},
      {name: "è‚–ç‘œæ¸…", university: "é‡åº†äº¤é€šå¤§å­¦", province: "é‡åº†", major: "åŸä¹¡è§„åˆ’", phone: "18172777592", notes: "", longitude: "106.581515", latitude: "29.615467"},
      {name: "å¾æµ©ç„¶", university: "æ´›é˜³ç†å·¥å­¦é™¢", province: "æ²³å—æ´›é˜³", major: "ææ–™ç‰©ç†", phone: "18770646086", notes: "", longitude: "112.45429", latitude: "34.61939"},
      {name: "æ¨ç«‹æ™¨", university: "å—æ˜ŒåŒ»å­¦é™¢", province: "æ±Ÿè¥¿å—æ˜Œ", major: "å£è…”åŒ»å­¦", phone: "19579951205", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "å¶ç¥‰æ’", university: "æµ™æ±Ÿç†å·¥å¤§å­¦", province: "æµ™æ±Ÿæ­å·", major: "çººç»‡ç±»", phone: "17879692975", notes: "ä¸å­Ÿç£ŠåŒæ ¡", longitude: "120.173599", latitude: "30.308978"},
      {name: "è™é¦¨è“‰", university: "æ­¦æ±‰ä¸œæ¹–å­¦é™¢", province: "æ¹–åŒ—æ­¦æ±‰", major: "æ–°é—»å­¦", phone: "13097066659", notes: "", longitude: "114.343923", latitude: "30.513791"},
      {name: "å¼ èµ«ä¿Š", university: "åŒ—å¸ˆé¦™æ¸¯æµ¸ä¼šå¤§å­¦", province: "å¹¿ä¸œç æµ·", major: "è®¡ç®—æœºç±»(ä¸­å¤–åˆä½œåŠå­¦)", phone: "18870641304", notes: "åŒ—äº¬å¸ˆèŒƒå¤§å­¦-é¦™æ¸¯æµ¸ä¼šå¤§å­¦è”åˆå›½é™…å­¦é™¢", longitude: "113.549092", latitude: "22.126857"},
      {name: "å¼ ç’", university: "æˆéƒ½ç†å·¥å¤§å­¦", province: "å››å·æˆéƒ½", major: "æ²¹æ°”å‚¨è¿å·¥ç¨‹", phone: "13138291142", notes: "", longitude: "104.185025", latitude: "30.826655"},
      {name: "å‘¨ä¸œé˜³", university: "æ²³å—ç†å·¥å¤§å­¦", province: "æ²³å—ç„¦ä½œ", major: "åº”ç”¨ç‰©ç†å­¦", phone: "18479634163", notes: "", longitude: "113.241823", latitude: "35.215892"},
      {name: "å‘¨å®¶ç‘œ", university: "äº•å†ˆå±±å¤§å­¦", province: "æ±Ÿè¥¿å‰å®‰", major: "ä¼šè®¡å­¦", phone: "17779687578", notes: "ä¸å½­å˜‰é”¡åŒæ ¡", longitude: "114.992043", latitude: "27.113847"},
      {name: "å‘¨ä½³é¢–", university: "åŒ—äº¬è”åˆå¤§å­¦", province: "åŒ—äº¬", major: "å¤§æ•°æ®ç®¡ç†ä¸åº”ç”¨", phone: "13133681978", notes: "", longitude: "116.562374", latitude: "39.918083"},
      {name: "å‘¨æ–‡æ´", university: "æ±Ÿè¥¿å†œä¸šå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "æ—å­¦", phone: "18279629603", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "æœ±å½¤æ¬£", university: "æµ™æ±Ÿä¸­åŒ»è¯å¤§å­¦", province: "æµ™æ±Ÿæ­å·", major: "ä¸­è¥¿åŒ»ä¸´åºŠåŒ»å­¦", phone: "15779185363", notes: "", longitude: "120.173599", latitude: "30.308978"},
      {name: "æœ±é€¸æ¶µ", university: "å—é˜³å¸ˆèŒƒå­¦é™¢", province: "æ²³å—å—é˜³", major: "ç‰©ç†ï¼ˆå¸ˆèŒƒç±»ï¼‰", phone: "13217961081", notes: "", longitude: "112.534501", latitude: "32.996562"},
      {name: "å·¦é‡‘éš†", university: "æ±Ÿè‹ç†å·¥å­¦é™¢", province: "æ±Ÿè‹å¸¸å·", major: "åº”ç”¨åŒ–å­¦", phone: "19870689381", notes: "", longitude: "119.977461", latitude: "31.815092"},
      {name: "ç‹ç´«èŒœ", university: "æ±Ÿè¥¿ç§‘æŠ€å¸ˆèŒƒå¤§å­¦", province: "æ±Ÿè¥¿å—æ˜Œ", major: "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯", phone: "18307968921", notes: "", longitude: "115.892151", latitude: "28.676493"},
      {name: "åˆ˜åª›åª›", university: "é”¦å·åŒ»ç§‘å¤§å­¦", province: "è¾½å®é”¦å·", major: "ä¸´åºŠåŒ»å­¦", phone: "15879603916", notes: "", longitude: "121.147749", latitude: "41.130879"},
      {name: "ç‹æ·", university: "äº•å†ˆå±±å¤§å­¦", province: "äº•å†ˆå±±", major: "ä¸´åºŠåŒ»å­¦", phone: "19169890485", notes: "", longitude: "114.992043", latitude: "27.113847"}
    ];


    // 1. åˆå§‹åŒ–åœ°å›¾
    const map = L.map('map', {
      center: [35.0, 105.0],
      zoom: 5,
      maxBounds: L.latLngBounds(L.latLng(15, 73), L.latLng(54, 136)), // é™åˆ¶åœ¨ä¸­å›½èŒƒå›´
      zoomControl: true
    });

    // 2. åŠ è½½é«˜å¾·ä¸­æ–‡åœ°å›¾
    L.tileLayer('https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {
      subdomains: ['1','2','3','4'],
      attribution: '&copy; <a href="https://ditu.amap.com/">é«˜å¾·åœ°å›¾</a>'
    }).addTo(map);

    // 3. ä¸“ä¸šåˆ†ç±»ç³»ç»Ÿ
    const getMajorType = (major) => {
      if (!major) return 'engineering';
      if (/åŒ»å­¦|ä¸´åºŠ|è¯å­¦|å£è…”|æŠ¤ç†|ä¸­åŒ»|é¢„é˜²åŒ»å­¦|ä¸´åºŠåŒ»å­¦/.test(major)) return 'medical';
      if (/è®¾è®¡|ä¼ æ’­|æ–°é—»|ç»æµ|ç®¡ç†|ä¼šè®¡|å¸ˆèŒƒ|æ•™è‚²|è¯­è¨€|äººåŠ›èµ„æº/.test(major)) return 'arts';
      return 'engineering'; // é»˜è®¤å·¥ç§‘
    };
    
    // 4. åˆ›å»ºä¸“ä¸šå›¾æ ‡
    const createMajorIcon = (type) => {
      return L.divIcon({
        html: '<div></div>',
        className: `custom-icon ${type}-icon`,
        iconSize: [36, 36],
        iconAnchor: [18, 18]
      });
    };

    // 5. åŠ è½½æ•°æ®å¹¶ç”Ÿæˆæ ‡è®°
    const markers = L.markerClusterGroup({
      spiderfyOnMaxZoom: true,
      showCoverageOnHover: false,
      maxClusterRadius: 60,
      spiderLegPolylineOptions: { weight: 1.5, color: '#222', opacity: 0.5 }
    });

    classmatesData.forEach(student => {
      if (!student.latitude || !student.longitude) return;
      
      const majorType = getMajorType(student.major);
      const marker = L.marker([parseFloat(student.latitude), parseFloat(student.longitude)], {
        icon: createMajorIcon(majorType)
      }).bindPopup(`
        <div class="custom-popup ${majorType}">
          <b>${student.name}</b>
          <div>${student.major || 'ä¸“ä¸šæœªå¡«å†™'}</div>
          <div class="university">${student.university}</div>
          <div class="province">ğŸ“ ${student.province}</div>
          ${student.phone ? `<div class="phone">ğŸ“ ${student.phone}</div>` : ''}
          ${student.notes ? `<div class="notes">ğŸ’¬ ${student.notes}</div>` : ''}
        </div>
      `);
      
      markers.addLayer(marker);
    });
    
    map.addLayer(markers);
    
    // å¦‚æœæœ‰æœ‰æ•ˆæ ‡è®°ï¼Œç¼©æ”¾åˆ°åˆé€‚èŒƒå›´
    if (markers.getLayers().length > 0) {
      map.fitBounds(markers.getBounds(), { padding: [50, 50] });
    } else {
      map.setView([35.0, 105.0], 5); // é»˜è®¤ä¸­å›½è§†å›¾
    }

    // 6. æ·»åŠ ä¸“ä¸šç­›é€‰æ§ä»¶
    const majorFilter = L.control({ position: 'topright' });
    majorFilter.onAdd = () => {
      const div = L.DomUtil.create('div', 'major-filter');
      div.innerHTML = `
        <strong>ä¸“ä¸šç­›é€‰:</strong>
        <select id="major-select">
          <option value="all">æ‰€æœ‰ä¸“ä¸š</option>
          <option value="engineering">å·¥ç§‘ç±»</option>
          <option value="medical">åŒ»ç§‘ç±»</option>
          <option value="arts">æ–‡ç§‘ç±»</option>
        </select>
      `;
      return div;
    };
    majorFilter.addTo(map);

    // 7. ä¸“ä¸šç­›é€‰åŠŸèƒ½
    document.getElementById('major-select').addEventListener('change', function(e) {
      const type = e.target.value;
      markers.getLayers().forEach(layer => {
        const popupContent = layer.getPopup().getContent();
        const isMatch = popupContent.includes(`custom-popup ${type}`);
        layer.getElement().style.opacity = (type === 'all' || isMatch) ? 1 : 0.3;
        layer.getElement().style.zIndex = (type === 'all' || isMatch) ? 1000 : 0;
      });
    });
    
    // 8. æ·»åŠ åœ°å›¾æ¯”ä¾‹å°º
    L.control.scale({ position: 'bottomleft', imperial: false }).addTo(map);
  </script>
</body>
</html>
